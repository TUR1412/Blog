# [20251216-48] 任务看板
> **环境**: Windows 11 | **框架**: Vite + React + Tailwind | **档位**: 4档 (幽灵杀手)
> **已激活矩阵**: [模块 A: 视觉矫正] + [模块 E: 幽灵防御] + [模块 F: 需求镜像]

## 1. 需求镜像 (Requirement Mirroring)
> **我的理解**: 在 `C:\Wook\AAAA` 里持续迭代个人博客站点；内容必须是修仙题材，专注“轩天帝（轩少）”的纪事与人物志；页面交互与美学要做到“世界级别魁首”，并且具备 Q 弹触感。
>
> **不做什么**:
> - 不在后台启动任何长驻服务（不跑 `dev server`），只做 `build/lint` 等有限任务。
> - 不抢占端口；如用户本地已有服务运行，只提示手动重启。
> - 不在站点正文写编程/技术教程等无关内容。

## 2. 进化知识库 (Evolutionary Knowledge - Ω)
- [!] (新发现) 本机 Node 为 `v25.0.0`：依赖选择需兼容较新 Node。
- [!] (新发现) 交互沉淀必须可追溯：收藏与“继续阅读”要落地到本地存储，且有明确入口可复用。
- [!] (新发现) GitHub Pages/子路径部署时，静态资源必须走 `base: './'` + `%BASE_URL%`，否则会出现“资源 404 幽灵”。
- [!] (新发现) 玻璃拟态的 `backdrop-filter` + 大面积光晕 `blur` 在部分设备上会明显拖慢滚动；因此默认样式要更克制，并持续做针对性降负（不引入模式切换）。
- [!] (新发现) 关系谱“谱面”以“显眼但不费劲”为准：边线统一走原生 `<path>`（不再逐条 `motion.path`），用 CSS `transition` 做明暗过渡；选中节点与相连边线给一层“墨光”强调，同时对深/浅主题自动适配对比度。
- [!] (新发现) 全局 hover 的“上浮位移”在绝对定位节点上可能触发 hover 抖动（鼠标离开/进入反复），表现为“闪没/点了没反应”；改为 hover 轻微 `scale + brightness`，保留 Q 弹但不让指针丢失。
- [!] (新发现) 绝对定位节点同时用了 Tailwind 的 `translate`（居中），任何 `.tap:hover { transform: ... }` 都会覆盖它，导致“瞬移→丢 hover→再瞬移”的闪烁循环；因此 tap 动效必须用 CSS `scale`（独立属性）而不是写死 `transform`。
- [!] (新发现) Edge 下，谱面节点同时叠加 `backdrop-filter` + `translate` + 全局 `.tap` 动效，仍可能出现 hover/点击命中抖动；最稳妥是让谱面节点退出全局 `.tap`，只做边框/底色/阴影过渡，保证“可点、不闪”。 
- [!] (新发现) 玻璃底座默认 blur 过高会拖慢滚动；将 `.glass` blur 下调为 `lg`，把“观感”留给关键节点，把“顺滑”留给整站手感。
- [!] (新发现) “定位：/path?query”是全站最短路径：洞府图/关系谱也应提供一键复制，便于写入札记与分享。
- [!] (新发现) 札记导入要兼容“文卷/存档”，并记录来源（例如“导入：文件名”），便于追溯。
- [!] (新发现) 洞府图需要同时支持 URL 定位（可分享）与本地记忆（不怕刷新）。
- [!] (新发现) 洞府图加入筛选后，URL 参数更新必须“合并写入”，避免互相覆盖导致筛选丢失。
- [!] (新发现) 关系谱同样要支持 URL 分享定位（`?id=`）+ 本地记忆；并保持筛选参数不互相覆盖。
- [!] (新发现) 洞府图“路标批注”要以节点 ID 为主键存储，并提供“一键并入札记”的可追溯来源字段。
- [!] (新发现) HashRouter 场景下避免使用 `#锚点`：定位应走 `?h=` 参数（否则会被路由吞掉）。

## 3. 执行清单 (Execution)
- [x] 1. 拉起 Vite + React 工程骨架
- [x] 2. 配置 Tailwind 主题与玻璃拟态底座
- [x] 3. 落地路由、导航、命令面板（快捷键）
- [x] 4. 写入“轩天帝 / 轩少”纪事内容与年表
- [x] 5. 增加札记（localStorage 持久化）与藏品拖拽排序
- [x] 6. 执行 `npm run build` / `npm run lint`（有限热同步）
- [x] 7. 首版提交并推送到远程
- [x] 8. 第二版：加入收藏聚合与继续阅读入口（并推送）
- [x] 9. 第三版：阅读定位（目录高亮 + 续读提示）与版本更新（并推送）
- [x] 10. 第四版：段落级续读（记住句读）与收藏管理（拖拽排序/取消收藏）（并推送）
- [x] 11. 第五版：收藏导出/导入与“沉浸阅读”（隐藏导航/专注模式）（并推送）
- [x] 12. 第六版：札记导入/导出（文卷/存档）与“洞府图”（年表可视化导航）（并推送）
- [x] 13. 第七版：首屏性能优化（路由分包）+ 洞府图搜索/键盘走位 + 一键收入札记（并推送）
- [x] 14. 第八版：洞府图“洞府四层/气象”筛选 + 年表分层标记 + 新增纪事（夏至抄经 / 白露对誓）（并推送）
- [x] 15. 第九版：关系谱（人/誓词/旧物/关口/地点）+ 新增纪事（巡访回访）与年表节点（并推送）
- [x] 16. 第十版：洞府图节点“路标批注”（自动保存 + 一键并入札记）（并推送）
- [x] 17. 第十一版：誓词细则落地篇章（霜降）+ 年表节点 + 关系谱牵连补齐 + 路标批注存档导入/导出（并推送）
- [x] 18. 第十二版：关系谱“只看牵连”聚焦 + 洞府图批注批量导出文卷（并推送）
- [x] 19. 第十三版：洞府图批注总览（可筛选/可检索/可一键并入札记）（并推送）
- [x] 20. 第十四版：关系谱节点批注（自动保存 + 总览 + 并入札记）（并推送）
- [x] 21. 第十五版：关系谱批注导入/导出存档与文卷（防丢失 + 易归档）（并推送）
- [x] 22. 第十六版：批注互通（关系谱/洞府图“收入札记”可选连同批注）（并推送）
- [x] 23. 第十七版：批注馆（全站批注汇总：洞府图 + 关系谱；可检索/导出/导入/定位/并入札记）（并推送）
- [x] 24. 第十八版：批注馆“同源联动”（从条目直达对应纪事/洞府/关系，路径更短）（并推送）
- [x] 25. 第十九版：批注馆“封印整卷”（按洞府层/关系类分卷的一键导出整本文卷）（并推送）
- [x] 26. 第二十版：批注馆“回声刻印”（导入前显示差异/合并摘要，避免误覆盖）（并推送）
- [x] 27. 第二十一版：批注馆“清心诀”（剔除空批注 / 只清某源 / 回退印记撤销）（并推送）
- [x] 28. 第二十二版：批注馆“护卷符”（导入/清心前自动生成本地快照，可一键下载备份）（并推送）
- [x] 29. 第二十三版：经卷观（Markdown 观感大升级：札记“经卷观”预览 + 批注 Markdown 排版统一）（并推送）
- [x] 30. 第二十四版：回魂灯（护卷符快照一键恢复 + “恢复前”回退印记）+ 札记经卷目录（标题定位 + URL 分享）+ 纪事排版统一（prose）
- [x] 31. 第二十五版：札记经卷观增强（目录折叠 + 目录检索 + 一键复制当前位置定位）（并推送）
- [x] 32. 第二十六版：GitHub Pages 挂载（Actions 自动构建/发布 dist）（并推送）
- [x] 33. 第二十七版：札记经卷观“章节内检索”（命中高亮 + 上一处/下一处跳转）（并推送）
- [x] 34. 第二十八版：批注馆“卷内检索”（命中高亮 + 上一处/下一处跳转）（并推送）
- [x] 35. 第二十九版：洞府图/关系谱“卷内检索”（在单节点批注编辑区快速跳命中）（并推送）
- [x] 36. 第三十版：批注馆“命中导航增强”（命中摘要 + 一键回到当前命中条目）（并推送）
- [x] 37. 第三十一版：Markdown 经卷排版再升阶（符纹标题 / 表格经卷 / 高亮流光）（并推送）
- [x] 38. 第三十二版：卷内检索“高亮选项”（区分大小写 / 整词 / 忽略标点）（并推送）
- [x] 39. 第三十三版：交互流畅度优化（Markdown memo + 命中切换不重解析 + 批注馆检索/高亮降负）（并推送）
- [x] 40. 第三十四版：洞府图/关系谱检索与列表渲染降负（deferred + 预计算 hay + content-visibility）（并推送）
- [x] 41. 第三十五版：洞府图/关系谱“批注编辑区检索”（textarea）接入同款选项（区分大小写/整词/忽略标点）（并推送）
- [x] 42. 第三十五版：轻影模式切换（已尝试；后续 v36 移除以保持轻量，改为默认优化）（并推送）
- [x] 43. 第三十六版：移除性能模式切换（不做分叉），继续做默认顺滑化（并推送）
- [x] 44. 第三十七版：Markdown 经卷观“帅气强化”（首段落款 + 符印式 Callout + 标题更有章法）（并推送）
- [x] 45. 第三十七版：GitHub README 经卷化（卷首/地界/手感/存档，观感更“像真事”】【并推送】）
- [x] 46. 第三十七版：GitHub README 封面图（深浅色自动切换，仓库首页更像“卷首封面”】【并推送】）
- [x] 47. 第三十八版：新增纪事《冬至封卷》+ 年表节点 + 关系谱挂载（并推送）
- [x] 48. 第三十八版：首页“近三篇纪事”改为真正的最新三篇（并推送）
- [x] 49. 第三十九版：关系谱线索簿 ↑↓ 走位（Enter 落笔）+ 谱面边线动效降载 + 洞府/关系一键复制定位 + 玻璃底座默认降负（并推送）
- [x] 50. 第四十版：纪事支持 URL 锚点定位（?h=）+ 一键复制定位；洞府图 Enter 落笔；顶栏 blur 降负（并推送）
- [x] 51. 第四十一版：全站路由转场“先退后入”（退出+进入）；关系谱详记切换加过渡；滚动回顶改为立即归位以配合转场（并推送）
- [x] 52. 第四十二版：滚动回顶延后到“转场退出完成后”触发；路由转场去掉缩放以减少抽搐感（并推送）
- [x] 53. 第四十三版：路由模块预取（idle + 导航 hover/focus）减少首次进入卡顿；路由转场加“墨线”微动效（并推送）
- [x] 54. 第四十四版：关系谱“谱面”观感修复（边线明暗/颜色过渡 + 选中节点丝滑光环 + 深浅主题对比自适应）；并移除边线 `motion.path` 以降低首帧与交互负担（并推送）
- [x] 55. 第四十五版：修复关系谱“谱面乱”的定位错误（节点误带 `relative` 覆盖 `absolute` 导致布局漂移/堆叠）；谱面恢复稳定排布（并推送）
- [x] 56. 第四十六版：修复“悬浮闪没/点击失效”的 hover 抖动（全站 `.tap:hover` 从位移改为轻微缩放+提亮，避免指针丢失）（并推送）
- [x] 57. 第四十七版：彻底修复关系谱卡片“飘逸闪烁/点不中”（`.tap:hover` 不再覆写 `transform`，改用 CSS `scale` 叠加，不破坏 `-translate-x/y-1/2`）（并推送）
- [x] 58. 第四十八版：Edge 下谱面节点仍闪：谱面节点退出全局 `.tap`（避免与 `backdrop-filter + translate` 叠加触发命中抖动），改为阴影/边框过渡，确保“可点且不闪”（并推送）
